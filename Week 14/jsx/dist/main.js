/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is not neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./framework.js":
/*!**********************!*\
  !*** ./framework.js ***!
  \**********************/
/***/ ((__unused_webpack_module, exports) => {

eval("\n\nObject.defineProperty(exports, \"__esModule\", ({\n    value: true\n}));\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nexports.createElement = createElement;\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction createElement(type, attributes) {\n    var element = void 0;\n    if (typeof type === 'string') {\n        // 原生的元素\n        // element = document.createElement(type);\n        element = new ElementWrapper(type);\n    } else {\n        element = new type();\n    }\n    for (var name in attributes) {\n        element.setAttribute(name, attributes[name]);\n    }\n\n    for (var _len = arguments.length, children = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        children[_key - 2] = arguments[_key];\n    }\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n        for (var _iterator = children[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var child = _step.value;\n\n            if (typeof child === 'string') {\n                // child = document.createTextNode(child);\n                child = new TextWrapper(child);\n            }\n            element.appendChild(child);\n        }\n    } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n    } finally {\n        try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n            }\n        } finally {\n            if (_didIteratorError) {\n                throw _iteratorError;\n            }\n        }\n    }\n\n    return element;\n}\n\nvar Component = exports.Component = function () {\n    function Component(type) {\n        // this.root = this.render();\n\n        _classCallCheck(this, Component);\n    }\n\n    _createClass(Component, [{\n        key: 'setAttribute',\n        value: function setAttribute(name, value) {\n            this.root.setAttribute(name, value);\n        }\n    }, {\n        key: 'appendChild',\n        value: function appendChild(child) {\n            child.mounteTo(this.root);\n        }\n    }, {\n        key: 'mounteTo',\n        value: function mounteTo(parent) {\n            parent.appendChild(this.root);\n        }\n        // render() {\n        //     return document.createElement('div');\n        // }\n\n    }]);\n\n    return Component;\n}();\n\nvar ElementWrapper = function (_Component) {\n    _inherits(ElementWrapper, _Component);\n\n    function ElementWrapper(type) {\n        _classCallCheck(this, ElementWrapper);\n\n        var _this = _possibleConstructorReturn(this, (ElementWrapper.__proto__ || Object.getPrototypeOf(ElementWrapper)).call(this));\n\n        _this.root = document.createElement(type);\n        return _this;\n    }\n\n    return ElementWrapper;\n}(Component);\n\nvar TextWrapper = function (_Component2) {\n    _inherits(TextWrapper, _Component2);\n\n    function TextWrapper(content) {\n        _classCallCheck(this, TextWrapper);\n\n        var _this2 = _possibleConstructorReturn(this, (TextWrapper.__proto__ || Object.getPrototypeOf(TextWrapper)).call(this));\n\n        _this2.root = document.createTextNode(content);\n        return _this2;\n    }\n\n    return TextWrapper;\n}(Component);\n\n//# sourceURL=webpack://jsx/./framework.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
(() => {
/*!*****************!*\
  !*** ./main.js ***!
  \*****************/
eval("\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _framework = __webpack_require__(/*! ./framework.js */ \"./framework.js\");\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar Carousel = function (_Component) {\n    _inherits(Carousel, _Component);\n\n    function Carousel() {\n        _classCallCheck(this, Carousel);\n\n        var _this = _possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this));\n\n        _this.attributes = Object.create(null);\n        return _this;\n    }\n\n    _createClass(Carousel, [{\n        key: 'setAttribute',\n        value: function setAttribute(name, value) {\n            this.attributes[name] = value;\n        }\n    }, {\n        key: 'render',\n        value: function render() {\n            var _this2 = this;\n\n            this.root = document.createElement('div');\n            this.root.classList.add('carousel');\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = this.attributes.src[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var record = _step.value;\n\n                    // let child = document.createElement('img');\n                    // child.setAttribute('src', record);\n                    var child = document.createElement('div');\n                    child.style.backgroundImage = 'url(' + record + ')';\n                    this.root.appendChild(child);\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            var position = 0;\n\n            this.root.addEventListener(\"mousedown\", function (event) {\n                // console.log(\"mousedown\");\n                var children = _this2.root.children;\n                var startX = event.clientX;\n\n                var move = function move(event) {\n                    console.log(\"mousemove\");\n                    // 使用event.clientX和event.clientY获取坐标位置\n                    // console.log(event.clientX, event.clientY);\n                    var dx = event.clientX - startX;\n\n                    // let current = position - Math.round(dx / 500);\n                    var current = position - (dx - dx % 500) / 500; // 搞得这么复杂\n\n                    var _arr = [-1, 0, 1];\n                    for (var _i = 0; _i < _arr.length; _i++) {\n                        var offset = _arr[_i];\n                        var pos = current + offset; // 存在负数\n                        pos = (pos + children.length) % children.length;\n\n                        children[pos].style.transition = \"none\";\n                        children[pos].style.transform = 'translateX(' + (-pos * 500 + offset * 500 + dx % 500) + 'px)';\n                    }\n\n                    // for (let child of children) {\n                    //     child.style.transition = \"none\";\n                    //     child.style.transform = `translateX(${- position * 500 + dx}px)`;\n\n                    // }\n                };\n\n                var up = function up(event) {\n                    var dx = event.clientX - startX;\n\n                    position = position - Math.round(dx / 500);\n\n                    var _arr2 = [0, -Math.sign(Math.round(dx / 500) - dx + 250 * Math.sign(dx))];\n                    for (var _i2 = 0; _i2 < _arr2.length; _i2++) {\n                        var offset = _arr2[_i2];\n                        var pos = position + offset;\n                        pos = (pos + children.length) % children.length;\n\n                        children[pos].style.transition = \"\";\n                        children[pos].style.transform = 'translateX(' + (-pos * 500 + offset * 500) + 'px)';\n                    }\n\n                    // position = position - Math.round(dx / 500);\n                    // for (let child of children) {\n                    //     child.style.transition = \"\";\n                    //     child.style.transform = `translateX(${-position * 500}px)`;\n\n                    // }\n                    document.removeEventListener(\"mousemove\", move);\n                    document.removeEventListener(\"mouseup\", up);\n                };\n\n                document.addEventListener(\"mousemove\", move);\n                document.addEventListener(\"mouseup\", up);\n            });\n\n            /*let currentIndex = 0;\n            setInterval(()=>{\n                let children = this.root.children;\n                let nextIndex = (currentIndex + 1) % children.length;\n                 // 只控制前后两张图片\n                let current = children[currentIndex];\n                let next = children[nextIndex];\n                 next.style.transition = \"none\";\n                next.style.transform = `translateX(${100 - nextIndex * 100}%)`\n                 setTimeout(()=>{\n                    next.style.transition = \"\";\n                    current.style.transform = `translateX(${-100 - currentIndex * 100}%)`\n                    next.style.transform = `translateX(${-nextIndex * 100}%)`\n                     currentIndex = nextIndex;\n                }, 16);\n                \n                // for (let child of children) {\n                //     child.style.transform = `translateX(-${current*100}%)`;\n                // }\n            }, 3000);\n            */\n            // console.log(this.attributes.src);\n\n            return this.root;\n        }\n    }, {\n        key: 'mounteTo',\n        value: function mounteTo(parent) {\n            parent.appendChild(this.render());\n        }\n    }]);\n\n    return Carousel;\n}(_framework.Component);\n\nvar imgs = ['https://static001.geekbang.org/resource/image/95/d1/95775d0927a580170673aedfc70e33d1.jpg', 'https://static001.geekbang.org/resource/image/37/e4/37fbe168a471e8ee1267fd741d096fe4.jpg', 'https://static001.geekbang.org/resource/image/f7/f8/f7c1822abb4382896b9b4d3530b02ff8.jpg'];\n\n// var a = <Div id=\"a\">\n//     <span>1</span>\n//     <span>2</span>\n//     <span>3</span>\n//     </Div>;\n\n// document.body.appendChild(a);\n\nvar a = (0, _framework.createElement)(Carousel, { 'class': 'carousel', src: imgs });\n\na.mounteTo(document.body);\n\n//# sourceURL=webpack://jsx/./main.js?");
})();

/******/ })()
;